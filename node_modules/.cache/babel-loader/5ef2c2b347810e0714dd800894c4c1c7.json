{"ast":null,"code":"var _jsxFileName = \"/Users/vamsi/Desktop/ReactForm/my_expense/src/components/Dashboard.js\";\nimport React, { useState, useEffect } from 'react';\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/firestore';\nimport { Pie } from 'react-chartjs-2'; // Import Pie component from react-chartjs-2\nimport './Dashboard.css'; // Import CSS file for styling\n\nfunction Dashboard({\n  user\n}) {\n  const [expenses, setExpenses] = useState([]);\n  const [newExpense, setNewExpense] = useState({\n    name: '',\n    amount: 0,\n    category: '',\n    date: new Date().toISOString().slice(0, 10) // Extract \"yyyy-MM-dd\" part\n  });\n  useEffect(() => {\n    const fetchExpenses = async () => {\n      try {\n        const snapshot = await firebase.firestore().collection('expenses').where('userId', '==', user.uid).get();\n        const expensesData = snapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        setExpenses(expensesData);\n      } catch (error) {\n        console.error('Error fetching expenses:', error);\n      }\n    };\n    fetchExpenses();\n  }, [user]);\n  const handleAddExpense = async () => {\n    try {\n      await firebase.firestore().collection('expenses').add({\n        ...newExpense,\n        userId: user.uid\n      });\n      const snapshot = await firebase.firestore().collection('expenses').where('userId', '==', user.uid).get();\n      const updatedExpensesData = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setExpenses(updatedExpensesData);\n      setNewExpense({\n        name: '',\n        amount: 0,\n        category: '',\n        date: new Date().toISOString().slice(0, 10)\n      });\n    } catch (error) {\n      console.error('Error adding expense:', error);\n    }\n  };\n  const handleRemoveExpense = async expenseId => {\n    try {\n      await firebase.firestore().collection('expenses').doc(expenseId).delete();\n      setExpenses(prevExpenses => prevExpenses.filter(expense => expense.id !== expenseId));\n    } catch (error) {\n      console.error('Error removing expense:', error);\n    }\n  };\n  const signOut = async () => {\n    try {\n      await firebase.auth().signOut();\n    } catch (error) {\n      console.error('Error signing out:', error.message);\n    }\n  };\n\n  // Function to calculate total amount spent in each category\n  const calculateCategoryAmounts = () => {\n    const categoryAmounts = {};\n    expenses.forEach(expense => {\n      const category = expense.category;\n      const amount = parseFloat(expense.amount); // Convert amount to number\n      if (categoryAmounts[category]) {\n        categoryAmounts[category] += amount;\n      } else {\n        categoryAmounts[category] = amount;\n      }\n    });\n    return categoryAmounts;\n  };\n\n  // Data for the pie chart\n  const pieChartData = {\n    labels: Object.keys(calculateCategoryAmounts()),\n    datasets: [{\n      data: Object.values(calculateCategoryAmounts()),\n      backgroundColor: ['rgba(255, 99, 132, 0.6)', 'rgba(54, 162, 235, 0.6)', 'rgba(255, 206, 86, 0.6)', 'rgba(75, 192, 192, 0.6)', 'rgba(153, 102, 255, 0.6)', 'rgba(255, 159, 64, 0.6)'],\n      hoverBackgroundColor: ['rgba(255, 99, 132, 0.8)', 'rgba(54, 162, 235, 0.8)', 'rgba(255, 206, 86, 0.8)', 'rgba(75, 192, 192, 0.8)', 'rgba(153, 102, 255, 0.8)', 'rgba(255, 159, 64, 0.8)']\n    }]\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, \"Welcome, \", user.email), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: signOut,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }, \"Sign Out\"), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, \"Expenses\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleAddExpense,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }, \"Add Expense\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }, expenses.map(expense => /*#__PURE__*/React.createElement(\"li\", {\n    key: expense.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 11\n    }\n  }, expense.name, \" - $\", expense.amount, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleRemoveExpense(expense.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, \"Remove\")))), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }, \"Expense Distribution by Category\"), /*#__PURE__*/React.createElement(Pie, {\n    data: pieChartData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }));\n}\nexport default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","firebase","Pie","Dashboard","user","expenses","setExpenses","newExpense","setNewExpense","name","amount","category","date","Date","toISOString","slice","fetchExpenses","snapshot","firestore","collection","where","uid","get","expensesData","docs","map","doc","id","data","error","console","handleAddExpense","add","userId","updatedExpensesData","handleRemoveExpense","expenseId","delete","prevExpenses","filter","expense","signOut","auth","message","calculateCategoryAmounts","categoryAmounts","forEach","parseFloat","pieChartData","labels","Object","keys","datasets","values","backgroundColor","hoverBackgroundColor","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","email","onClick","key"],"sources":["/Users/vamsi/Desktop/ReactForm/my_expense/src/components/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/firestore';\nimport { Pie } from 'react-chartjs-2'; // Import Pie component from react-chartjs-2\nimport './Dashboard.css'; // Import CSS file for styling\n\nfunction Dashboard({ user }) {\n  const [expenses, setExpenses] = useState([]);\n  const [newExpense, setNewExpense] = useState({\n    name: '',\n    amount: 0,\n    category: '',\n    date: new Date().toISOString().slice(0, 10), // Extract \"yyyy-MM-dd\" part\n  });\n\n  useEffect(() => {\n    const fetchExpenses = async () => {\n      try {\n        const snapshot = await firebase.firestore().collection('expenses').where('userId', '==', user.uid).get();\n        const expensesData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n        setExpenses(expensesData);\n      } catch (error) {\n        console.error('Error fetching expenses:', error);\n      }\n    };\n    fetchExpenses();\n  }, [user]);\n\n  const handleAddExpense = async () => {\n    try {\n      await firebase.firestore().collection('expenses').add({\n        ...newExpense,\n        userId: user.uid,\n      });\n      const snapshot = await firebase.firestore().collection('expenses').where('userId', '==', user.uid).get();\n      const updatedExpensesData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      setExpenses(updatedExpensesData);\n      setNewExpense({\n        name: '',\n        amount: 0,\n        category: '',\n        date: new Date().toISOString().slice(0, 10),\n      });\n    } catch (error) {\n      console.error('Error adding expense:', error);\n    }\n  };\n\n  const handleRemoveExpense = async (expenseId) => {\n    try {\n      await firebase.firestore().collection('expenses').doc(expenseId).delete();\n      setExpenses(prevExpenses => prevExpenses.filter(expense => expense.id !== expenseId));\n    } catch (error) {\n      console.error('Error removing expense:', error);\n    }\n  };\n\n  const signOut = async () => {\n    try {\n      await firebase.auth().signOut();\n    } catch (error) {\n      console.error('Error signing out:', error.message);\n    }\n  };\n\n  // Function to calculate total amount spent in each category\n  const calculateCategoryAmounts = () => {\n    const categoryAmounts = {};\n    expenses.forEach(expense => {\n      const category = expense.category;\n      const amount = parseFloat(expense.amount); // Convert amount to number\n      if (categoryAmounts[category]) {\n        categoryAmounts[category] += amount;\n      } else {\n        categoryAmounts[category] = amount;\n      }\n    });\n    return categoryAmounts;\n  };\n\n  // Data for the pie chart\n  const pieChartData = {\n    labels: Object.keys(calculateCategoryAmounts()),\n    datasets: [\n      {\n        data: Object.values(calculateCategoryAmounts()),\n        backgroundColor: [\n          'rgba(255, 99, 132, 0.6)',\n          'rgba(54, 162, 235, 0.6)',\n          'rgba(255, 206, 86, 0.6)',\n          'rgba(75, 192, 192, 0.6)',\n          'rgba(153, 102, 255, 0.6)',\n          'rgba(255, 159, 64, 0.6)',\n        ],\n        hoverBackgroundColor: [\n          'rgba(255, 99, 132, 0.8)',\n          'rgba(54, 162, 235, 0.8)',\n          'rgba(255, 206, 86, 0.8)',\n          'rgba(75, 192, 192, 0.8)',\n          'rgba(153, 102, 255, 0.8)',\n          'rgba(255, 159, 64, 0.8)',\n        ],\n      },\n    ],\n  };\n\n  return (\n    <div className=\"dashboard-container\">\n      <h2>Welcome, {user.email}</h2>\n      <button onClick={signOut}>Sign Out</button>\n\n      <h3>Expenses</h3>\n      <button onClick={handleAddExpense}>Add Expense</button>\n      <ul>\n        {expenses.map(expense => (\n          <li key={expense.id}>\n            {expense.name} - ${expense.amount}\n            <button onClick={() => handleRemoveExpense(expense.id)}>Remove</button>\n          </li>\n        ))}\n      </ul>\n\n      <h3>Expense Distribution by Category</h3>\n      <Pie data={pieChartData} />\n    </div>\n  );\n}\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}