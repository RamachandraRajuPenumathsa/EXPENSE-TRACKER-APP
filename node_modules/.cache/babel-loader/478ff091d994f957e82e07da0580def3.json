{"ast":null,"code":"var _jsxFileName = \"/Users/vamsi/Desktop/ReactForm/my_expense/src/components/Dashboard.js\";\nimport React, { useState, useEffect } from 'react';\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/firestore';\nimport TransactionsContainer from './TransactionsContainer';\nimport { Pie } from 'react-chartjs-2'; // Import Pie component from react-chartjs-2\nimport './Dashboard.css'; // Import CSS file for styling\n\nfunction Dashboard({\n  user\n}) {\n  const [expenses, setExpenses] = useState([]);\n  const [newExpense, setNewExpense] = useState({\n    name: '',\n    amount: 0,\n    category: '',\n    date: new Date().toISOString().slice(0, 10) // Extract \"yyyy-MM-dd\" part\n  });\n  useEffect(() => {\n    const fetchExpenses = async () => {\n      try {\n        const snapshot = await firebase.firestore().collection('expenses').where('userId', '==', user.uid).get();\n        const expensesData = snapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        setExpenses(expensesData);\n      } catch (error) {\n        console.error('Error fetching expenses:', error);\n      }\n    };\n    fetchExpenses();\n  }, [user]);\n  const handleAddExpense = async () => {\n    try {\n      await firebase.firestore().collection('expenses').add({\n        ...newExpense,\n        userId: user.uid\n      });\n      setNewExpense({\n        name: '',\n        amount: 0,\n        category: '',\n        date: new Date().toISOString().slice(0, 10)\n      });\n    } catch (error) {\n      console.error('Error adding expense:', error);\n    }\n  };\n  const handleRemoveExpense = async expenseId => {\n    try {\n      await firebase.firestore().collection('expenses').doc(expenseId).delete();\n      setExpenses(prevExpenses => prevExpenses.filter(expense => expense.id !== expenseId));\n    } catch (error) {\n      console.error('Error removing expense:', error);\n    }\n  };\n  const signOut = async () => {\n    try {\n      await firebase.auth().signOut();\n    } catch (error) {\n      console.error('Error signing out:', error.message);\n    }\n  };\n\n  // Function to calculate total amount spent in each category\n  const calculateCategoryAmounts = () => {\n    const categoryAmounts = {};\n    expenses.forEach(expense => {\n      const category = expense.category;\n      const amount = parseFloat(expense.amount); // Convert amount to number\n      if (categoryAmounts[category]) {\n        categoryAmounts[category] += amount;\n      } else {\n        categoryAmounts[category] = amount;\n      }\n    });\n    return categoryAmounts;\n  };\n\n  // Data for the pie chart\n  const pieChartData = {\n    labels: Object.keys(calculateCategoryAmounts()),\n    datasets: [{\n      data: Object.values(calculateCategoryAmounts()),\n      backgroundColor: ['rgba(255, 99, 132, 0.6)', 'rgba(54, 162, 235, 0.6)', 'rgba(255, 206, 86, 0.6)', 'rgba(75, 192, 192, 0.6)', 'rgba(153, 102, 255, 0.6)', 'rgba(255, 159, 64, 0.6)'],\n      hoverBackgroundColor: ['rgba(255, 99, 132, 0.8)', 'rgba(54, 162, 235, 0.8)', 'rgba(255, 206, 86, 0.8)', 'rgba(75, 192, 192, 0.8)', 'rgba(153, 102, 255, 0.8)', 'rgba(255, 159, 64, 0.8)']\n    }]\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }, \"Welcome, \", user.email), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: signOut,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }, \"Sign Out\"), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }, \"Expenses\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleAddExpense,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, \"Add Expense\"), /*#__PURE__*/React.createElement(TransactionsContainer, {\n    expenses: expenses,\n    handleRemoveExpense: handleRemoveExpense,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, \"Expense Distribution by Category\"), /*#__PURE__*/React.createElement(Pie, {\n    data: pieChartData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }));\n}\nexport default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","firebase","TransactionsContainer","Pie","Dashboard","user","expenses","setExpenses","newExpense","setNewExpense","name","amount","category","date","Date","toISOString","slice","fetchExpenses","snapshot","firestore","collection","where","uid","get","expensesData","docs","map","doc","id","data","error","console","handleAddExpense","add","userId","handleRemoveExpense","expenseId","delete","prevExpenses","filter","expense","signOut","auth","message","calculateCategoryAmounts","categoryAmounts","forEach","parseFloat","pieChartData","labels","Object","keys","datasets","values","backgroundColor","hoverBackgroundColor","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","email","onClick"],"sources":["/Users/vamsi/Desktop/ReactForm/my_expense/src/components/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/firestore';\nimport TransactionsContainer from './TransactionsContainer';\nimport { Pie } from 'react-chartjs-2'; // Import Pie component from react-chartjs-2\nimport './Dashboard.css'; // Import CSS file for styling\n\nfunction Dashboard({ user }) {\n  const [expenses, setExpenses] = useState([]);\n  const [newExpense, setNewExpense] = useState({\n    name: '',\n    amount: 0,\n    category: '',\n    date: new Date().toISOString().slice(0, 10), // Extract \"yyyy-MM-dd\" part\n  });\n\n  useEffect(() => {\n    const fetchExpenses = async () => {\n      try {\n        const snapshot = await firebase.firestore().collection('expenses').where('userId', '==', user.uid).get();\n        const expensesData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n        setExpenses(expensesData);\n      } catch (error) {\n        console.error('Error fetching expenses:', error);\n      }\n    };\n    fetchExpenses();\n  }, [user]);\n\n  const handleAddExpense = async () => {\n    try {\n      await firebase.firestore().collection('expenses').add({\n        ...newExpense,\n        userId: user.uid,\n      });\n      setNewExpense({\n        name: '',\n        amount: 0,\n        category: '',\n        date: new Date().toISOString().slice(0, 10),\n      });\n    } catch (error) {\n      console.error('Error adding expense:', error);\n    }\n  };\n\n  const handleRemoveExpense = async (expenseId) => {\n    try {\n      await firebase.firestore().collection('expenses').doc(expenseId).delete();\n      setExpenses(prevExpenses => prevExpenses.filter(expense => expense.id !== expenseId));\n    } catch (error) {\n      console.error('Error removing expense:', error);\n    }\n  };\n\n  const signOut = async () => {\n    try {\n      await firebase.auth().signOut();\n    } catch (error) {\n      console.error('Error signing out:', error.message);\n    }\n  };\n\n  // Function to calculate total amount spent in each category\n  const calculateCategoryAmounts = () => {\n    const categoryAmounts = {};\n    expenses.forEach(expense => {\n      const category = expense.category;\n      const amount = parseFloat(expense.amount); // Convert amount to number\n      if (categoryAmounts[category]) {\n        categoryAmounts[category] += amount;\n      } else {\n        categoryAmounts[category] = amount;\n      }\n    });\n    return categoryAmounts;\n  };\n\n  // Data for the pie chart\n  const pieChartData = {\n    labels: Object.keys(calculateCategoryAmounts()),\n    datasets: [\n      {\n        data: Object.values(calculateCategoryAmounts()),\n        backgroundColor: [\n          'rgba(255, 99, 132, 0.6)',\n          'rgba(54, 162, 235, 0.6)',\n          'rgba(255, 206, 86, 0.6)',\n          'rgba(75, 192, 192, 0.6)',\n          'rgba(153, 102, 255, 0.6)',\n          'rgba(255, 159, 64, 0.6)',\n        ],\n        hoverBackgroundColor: [\n          'rgba(255, 99, 132, 0.8)',\n          'rgba(54, 162, 235, 0.8)',\n          'rgba(255, 206, 86, 0.8)',\n          'rgba(75, 192, 192, 0.8)',\n          'rgba(153, 102, 255, 0.8)',\n          'rgba(255, 159, 64, 0.8)',\n        ],\n      },\n    ],\n  };\n\n  return (\n    <div className=\"dashboard-container\">\n      <h2>Welcome, {user.email}</h2>\n      <button onClick={signOut}>Sign Out</button>\n\n      <h3>Expenses</h3>\n      <button onClick={handleAddExpense}>Add Expense</button>\n\n      <TransactionsContainer expenses={expenses} handleRemoveExpense={handleRemoveExpense} />\n\n      <h3>Expense Distribution by Category</h3>\n      <Pie data={pieChartData} />\n    </div>\n  );\n}\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}